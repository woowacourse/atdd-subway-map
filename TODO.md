# 기능 구현 목록 작성

### 테스트 코드
- [x] 노선 생성
- [x] 노선 목록 조회
- [x] 노선 조회
- [x] 노선 수정
- [x] 노선 삭제

### 기능 목록
- [x] 노선 생성 기능
- [x] 노선 목록 조회 기능
- [x] 노선 조회 기능
- [x] 노선 수정 기능
- [x] 노선 삭제 기능

### JDBC로 리팩토링
- [x] 노선 생성 기능
- [x] 노선 목록 조회 기능
- [x] 노선 조회 기능
- [x] 노선 수정 기능
- [x] 노선 삭제 기능

- [x] 역 생성 기능
- [x] 역 저장 기능
- [x] 역 목록 조회 기능
- [x] 역 제거 기능

## 3단계 - 지하철 구간 관리 기능

### 지하철 노선(Line) 추가 API 수정 - POST /lines
- [x] 노선(Line) 추가 시 3가지 정보를 추가로 입력 받음
    - [x] upStationId: 상행 종점 / downStationId: 하행 종점 / distance: 두 종점간의 거리
    - [x] 두 종점간의 연결 정보 이용하여 노선(Line) 추가 시, 구간(Section) 정보도 함께 등록

### DAO 구축 + 테스트 코드
- [x] Line DAO + 테스트 코드
- [x] Station DAO + 테스트 코드
- [x] Section DAO + 테스트 코드

### 인수 테스트 최적화시키기
- [x] StationAcceptanceTest부터 하나한씩 테스트 만들어나가기 (Station API는 기존에 완성되어 있으므로 기존에 정상적으로 응답하는 값 바탕으로 테스트 코드 작성하기)
- [x] Json 데이터 검증 쉽게 하는 방법 찾기
  -> 그냥 일일이 작성하자! 그게 그거다! Json 으로 굳이 변환하면서 확인하는 게 오히려 응집도가 떨어져서 확인이 어렵다.
- [x] RestAssured 반복되는 부분 모듈화 시키기
- [x] LineAcceptanceTest 새로 작성하기


### 지하철 노선(Line) 관련 API 전체 수정
- [x] 노선 삭제
- [x] 노선 조회
- [x] 노선 목록 조회
- [x] 노선 수정
- [x] 노선(Line)에 구간을(Section) 추가하는 API 만들기 - POST /lines/1/sections

### 구간 등록
- [x] 상행 종점(구간) 등록
- [x] 하행 종점(구간) 등록
- [x] 나의 노선에는 갈래길이 허용되지 않기 때문에 새로운 구간이 추가되기 전에 갈래길이 생기지 않도록 기존 구간을 변경
  - [x] [예외] 역 사이에 새로운 역을 등록할 경우 기존 역 사이 길이보다 크거나 같으면 등록을 할 수 없음
- [x] [예외] 상행역과 하행역이 이미 노선에 모두 등록되어 있다면 추가할 수 없음
    -> A-B, B-C 구간이 등록된 상황에서 B-C 구간을 등록할 수 없음(A-C 구간도 등록할 수 없음)
- [x] 상행역과 하행역 둘 중 하나도 포함되어있지 않으면 추가할 수 없음

### 구간 등록에 대한 ATDD 테스트 코드 추가하기
- [x] 상행 종점 등록
- [x] 하행 종점 등록
- [x] 라인 중간에 구간 등록
- [x] [예외] 라인이 상행, 하행 둘다 등록되어 있다면 예외 발생
- [x] [예외] 라인이 상행, 하행 둘 중에 하나라도 등록되어 있지 않다면 예외 발생
- [x] [예외] 역 사이에 새로운 역을 등록할 경우 기존 역 사이 길이보다 크거나 같으면 등록을 할 수 없음

### 구간 삭제에 대한 ATDD 테스트 코드 추가하기
- [ ] [예외] 한 라인의 구간이 하나인 경우에는 예외 발생

### 기타 
- [x] RestAssured에서 QueryParams, PathParams 활용해서 리팩토링하기
- [x] 예외 처리를 커스텀 예외 활용하도록 바꾸기
- [ ] Service Layer에 있는 비즈니스 로직을 Domain으로 옮기기
- [ ] ATDD에서는 @Transactional이 적용이 안 되는 지 테스트하기 / h2 DB에서는 Truncate로는 AI가 초기화 안 되는 건 아닌지