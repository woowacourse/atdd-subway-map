# 지하철 노선도 미션

## 기능 구현 목록
### 1단계 
- 지하철 역 관리
    - [x] 지하철 역 조회
    - [x] 지하철 역 추가
    - [x] 지하철 역 삭제
    - [x] [예외] 같은 이름의 지하철역 생성 불가
- 지하철 역 노선 관리
    - [x] 지하철 노선 생성
    - [x] 지하철 노선 조회
    - [x] 지하철 노선 목록 조회
    - [x] 지하철 노선 수정
    - [x] 지하철 노선 삭제

### 2단계
- [x]  스프링 빈 적용하기
- [x] 스프링 JDBC 적용하기
    - [x] h2 DB에 저장하기
- [x] Service 레이어 테스트 작성
- [x] Repository 레이어 테스트 작성


### 3단계
- [x] 구간 도메인 추가
- [x]  지하철 노선 추가 api 수정
    - [x] post `/lines`
    - [x] 상행 종점, 하행 종점, 거리 추가
    - [x] 상행, 하행, 거리 정보 없을 때 예외 처리
- [x]  구간 추가 api 구현
    - post `/lines/{id}/sections`
    - [x] 상행 종점 id, 하행 종점 id, 거리
    - [x] 구간을 추가하기 위해서는 역이 등록되어 있어야 함 (하나라도 없으면 에러)
    - [x] 구간 안에 구간을 삽입할 때 거리 예외 처리
    - [x] 구간 안에 구간을 삽입 할 때 기존 구간도 변경해야 함
    - [x] 상행, 하행 모두 등록되어 있을 때 추가할 수 없음
- [x]  노선 조회 시 구간에 포함된 역 목록 응답
    - get `/lines/{id}`
    - [x] stations 정보 추가
    - [x] response 201
- [x]  지하철 구간 제거 api 구현
    - 종점이 아닐 때 포함된 구간이 두 개 있음
    - delete `/lines/{id}/sections?stationId={id}`
    - == 파라미터로 줘야 함
    - 구간이 하나일 때 구간을 제거할 수 없음
  
      == 노선에 속한 역이 두 개 이하일 때 구간 제거할 수 없음
    - 구간을 제거할 때 합쳐진 구간의 거리도 변경해야 함