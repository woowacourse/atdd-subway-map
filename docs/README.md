# 기능요구사항

## 1단계

- [x] 역 dao 수정하기 

  - [x] 같은 이름을 갖는 지하철역 생성 불가

- [x] 노선 dao 구현하기

  - [x] Dao에서 List 이용하기
  - [x] 노선 생성하기
    - [x] 같은 이름 노선 생성 불가
  - [x] 노선 목록 조회하기
  - [x] 노선 조회하기
    - [x] 없는 노선 조회시 에러
  - [x] 노선 수정하기
  - [x] 노선 삭제하기

- [x] 노선 API 만들기

  - [x] 노선 생성
  - [x] 노선 생성 중복
  - [x] 노선 목록 조회
  - [x] 노선 조회
  - [x] 노선 수정
  - [x] 노선 삭제

- [x] 단위 테스트 작성하기

- [x] End To End 테스트 작성하기 

- [x] @Service, @Component 등 스프링 빈 사용금지

  - [x] Factory 이용해서 만들기
  - [x] 싱글턴 패턴 적용하기
## 2단계
- [x] gradle 의존성 추가하기
- [x] h2 데이터베이스 설정
- [x] h2 스키마 설정
- [x] 스프링 컨테이너로 객체관리하기
- [x] JDBC 활용하는 코드로 변경



## 3단계

- [x] 기능
  - [x] 노선 추가시 상행, 하행, 종점간 거리 입력받기
    - [x] 데이터 없을시 예외처리
    - [x] 테스트 코드 처리
      - [x] dao 테스트 코드
      - [x] E2E 테스트 코드
      - [x] service 테스트 코드
  - [x] 노선 조회시 구간에 포함된 역 목록 응답
    - [x] 상행에서 하행순으로 순서 보장
    - [x] 테스트 코드 처리
      - [x] dao 테스트 코드
      - [x] E2E 테스트 코드
      - [x] service 테스트 코드
  - [x] 지하철 구간 추가 기능
    - [x] 상행, 하행 번호, 거리 입력받기
    - [x] 상행 종점 등록시 노선 상행 갱신
    - [x] 하행 종점 등록시 노선 하행 갱신
    - [x] 구간 사이에 등록 시 갈래길이 생기지 않도록 변경
      - [x] 7미터 구간 사이에 4미터 길이의 구간이 들어오면 4,3미터로 분리
    - [x] 예외처리
      - [x] 새로운 역 등록시 기존 역 사이 길이보다 크거나 같으면 에러
      - [x] 상행역과 하행역이 모두 등록이 되어있다면 등록 불가
      - [x] 상행역과 하행역이 모두 등록이 안되어있다면 등록 불가
    - [x] 테스트 코드 처리
      - [x] dao 테스트 코드
      - [x] E2E 테스트 코드
      - [x] service 테스트 코드
  - [x] 지하철 구간 제거
    - [x] 종점 제거시 다음역이 종점이 됨
      - [x] 상행 삭제시 다음 역
      - [x] 하행 삭제시 이전 역
    - [x] 중간역이 제거될 경우 재배치
      - [x] 거리 합치기
    - [x] 구간이 하나인 노선에서는 구간제거 불가
    - [x] 테스트 코드 처리
      - [x] dao 테스트 코드
      - [x] E2E 테스트 코드
      - [x] service 테스트 코드



- [x]  API 만들기
  - [x] 지하철 구간 추가
  - [x] 지하철 구간 삭제

